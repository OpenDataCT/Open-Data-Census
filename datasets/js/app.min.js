function showInfo(e,i){allRows=_.sortBy(i.sheets("Census Data").all(),"State");var t=new URI,a=t.search(!0);if(a){var n=[];n.push(buildStateFilter(a.state)),n.push(buildDatatypeFilter(a.datatype)),updateCards(allRows,_.compact(n))}else updateCards(allRows)}function updateCards(e,i){var i=i||[],t=$("#card-template").html(),a=Handlebars.compile(t);_.chain(e).filter(function(e){return _.all(i,function(i){return i(e)})}).map(function(e){e.exists=e.Exists,e.digitized=e.Digitized,e.isPublic=e.Public,e.free=e.Free,e.online=e.Online,e.machine=e["Machine readable"],e.bulk=e["Available in bulk"],e.openLicense=e["No restrictions"],e.fresh=e["Up-to-date"],e.inRepo=e["In the state repository"],e.verifiable=e.Verifiable,e.complete=e.Complete,e.grade=e.Grade,e.score=e.Score,e.existsCaption=captions.exists[e.exists],e.digitizedCaption=captions.digitized[e.digitized],e.isPublicCaption=captions.isPublic[e.isPublic],e.freeCaption=captions.free[e.free],e.onlineCaption=captions.online[e.online],e.machineCaption=captions.machine[e.machine],e.bulkCaption=captions.bulk[e.bulk],e.openLicenseCaption=captions.openLicense[e.openLicense],e.freshCaption=captions.fresh[e.fresh],e.inRepoCaption=captions.inRepo[e.inRepo],e.verifiableCaption=captions.verifiable[e.verifiable],e.completeCaption=captions.complete[e.complete];var i=a(e);$("#cards").append(i),$('[data-toggle="tooltip"]').tooltip()})}function buildStateFilter(e){return e?function(i){return i.State===e}:!1}function buildDatatypeFilter(e){return e?function(i){return i["Type of Data"]===e}:!1}function clearCards(){$("#cards").empty()}function filterByState(e){clearCards(),updateCards(allRows,[buildStateFilter(e)])}function resetSearch(){clearCards(),updateCards(allRows)}function filterByDatatype(e){clearCards(),updateCards(allRows,[buildDatatypeFilter(e)])}function filterByMachineReadable(e){clearCards(),updateCards(_.filter(allRows,function(i){return e?"yes"===i["Machine readable"]:"no"===i["Machine readable"]}))}$(document).ready(function(){Tabletop.init({key:"1OhVbryeHBsPjJ3TjjVFlfM552pDKRjiUpTAXQJe9miA",callback:showInfo,parseNumbers:!0})});var allRows=[];