function showInfo(e,t){var a=Handlebars.compile($("#state-template").html());rawData=t.sheets("Census Data").all();var i=_.chain(rawData).map(function(e){return e["Type of Data"]}).unique().value();setupDatatypes(i);_.chain(rawData).groupBy("State").map(function(e,t){var a={state:t,state:e[0].State,stateHref:URI().filename("datasets.html").search({state:t}).toString(),datasets:[]};return _.each(i,function(t){var i=_.find(e,function(e){return e["Type of Data"]===t});if(i){var n={exists:i.Exists,digitized:i.Digitized,isPublic:i.Public,free:i.Free,online:i.Online,machine:i["Machine readable"],bulk:i["Available in bulk"],openLicense:i["No restrictions"],fresh:i["Up-to-date"],inRepo:i["In the state repository"],verifiable:i.Verifiable,complete:i.Complete,grade:i.Grade,score:i.Score,datasetHref:URI().filename("datasets.html").search({state:a.state,datatype:i["Type of Data"]})};for(var s in n)n[s]||(n[s]="DNE");n.existsCaption=captions.exists[n.exists],n.digitizedCaption=captions.digitized[n.digitized],n.isPublicCaption=captions.isPublic[n.isPublic],n.freeCaption=captions.free[n.free],n.onlineCaption=captions.online[n.online],n.machineCaption=captions.machine[n.machine],n.bulkCaption=captions.bulk[n.bulk],n.openLicenseCaption=captions.openLicense[n.openLicense],n.freshCaption=captions.fresh[n.fresh],n.inRepoCaption=captions.inRepo[n.inRepo],n.verifiableCaption=captions.verifiable[n.verifiable],n.completeCaption=captions.complete[n.complete],a.datasets.push(n).toString()}else a.datasets.push({exists:"DNE",digitized:"DNE",isPublic:"DNE",free:"DNE",online:"DNE",machine:"DNE",bulk:"DNE",openLicense:"DNE",fresh:"DNE",inRepo:"DNE",verifiable:"DNE",complete:"DNE",datasetHref:"https://github.com/opendata/Open-Data-Census/issues/new?title=Missing+Data:&amp;body=STATE%3A%20%0ADATASET%3A%20%0AURL%3A%20%0A%0ADESCRIPTION%2FCOMMENTS%3A%0A%0A%5BHere%20you%20might%20describe%20the%20quality%20of%20the%20data%2C%20rate%20it%20using%20the%20census%27%20metrics%2C%20suggest%20changes%20to%20an%20existing%20dataset%2C%20etc.%5D"})}),a}).sortBy("state").each(function(e){var t=a(e);$("#states").append(t)}).value();$('[data-toggle="tooltip"]').tooltip()}function setupDatatypes(e){var t=_.chain(e).map(function(e){return{datatype:e,datatypeHref:URI().filename(e.replace(/ /g,"")+".html").toString()}}).unique().value(),a=Handlebars.compile($("#dataset-template").html()),i=a(t);$("#datasets").append(i)}$(document).ready(function(){Tabletop.init({key:"1OhVbryeHBsPjJ3TjjVFlfM552pDKRjiUpTAXQJe9miA",callback:showInfo,parseNumbers:!0}),$(document).ready(function(){$(".table-responsive").doubleScroll()})});var rawData=[];